#Hw4 : s1021554 施翌琪
#題目：Non-uniform memory access

---

##介紹:
Non-uniform memory access（NUMA）中文翻譯 - 非一致記憶體存取，這是應用在多核心處理運作時記憶體協調的架構。
隨CPU的技術發展，時脈的提升和數量增加，效率有都快速提升，但與記憶體之間的傳輸速度一直都未能達到平衡，
廠商一直使用增大L3快取來降低這之間的延遲，不過不同核心之間與記憶體的速率會有可能不用，甚至多核心之間的速率也會有差異的可能。
因此會發生Cache Missed的情況，這匯流排的樽頸會嚴重地降低系統的效能，而NUMA技術的設計就是為了簡化匯流排的複雜程度。
NUMA架構把系統區分成多個節點，硬體的趨勢已走向可提供多個系統匯流排，而每一個匯流排都可服務一小組處理器。每一組處理器都有自己的記憶體，可能的話，也會有自己的 I/O 通道。每個記憶體和CPU就位於其中的節點上，而NUMA 節點內的 CPU 數目取決於硬體供應商。當CPU要存取在同一節點上的記憶體就能夠獲得比較高的存取速度；
要存取其他節點的記憶體就會比較慢，因為需要節點之間的資料傳遞。這也是名稱為非一致記憶體存取架構的原因。
而OS為了提高記憶體的存取效率，就會對NUMA的配置作出修改。NUMA架構是為了超越原本的對稱式多處理器 (Symmetric Multi-Processor, SMP)架構的延展性限制而設計的。使用對稱式多處理器時，所有記憶體存取都會放到相同共用記憶體匯流排。這適合只有少數幾個核心 的時候使用，當有很多核心處理器爭相存取共用記憶體的匯流排時就會出現狀況。NUMA突破了這些瓶頸，這架構限制記憶體匯流排上的CPU 數目，並連接不同的節點時提供高速互連的方式。
![DEMO](./pic1.gif)
![DEMO](./pic2.jpg)

----

##應用:
1. 硬體NUMA
具有硬體NUMA架構的系統不止只有一個系統匯流排，每一個節點會服務一節點的處理器。每一組處理器有它自己的記憶體，可能的話，也會有它自己的 I/O 通道，但每一個 CPU 可以用相同的方式來存取與其他群組相關聯的記憶體。每一個群組就稱為 NUMA 節點。NUMA 節點內的 CPU 數目取決於硬體供應商。硬體製造商會告訴您，您的電腦是否支援硬體 NUMA。如果有硬體 NUMA，它可設定為使用交錯記憶體，而非 NUMA。
2. 軟體NUMA
將CPU分組成為節點，就稱為軟體NUMA。通常當有許多CPU但沒有硬體NUMA時，就會設定軟體NUMA，使用軟體NUMA也可以將硬體NUMA節點細分為更小的群組。
記憶體節點是根據硬體NUMA而建立，因此不受軟體NUMA的影響。假設有一部內含八個CPU的SMP電腦，且建立四個軟體NUMA節點，而每一個節點各有兩個 CPU，那麼就只有一個記憶體節點可服務所有四個 NUMA 節點。軟體 NUMA 的好處包括在具有很多CPU但沒有硬體NUMA架構設計的電腦上減少 I/O 和延遲寫入器瓶頸。每個 NUMA 節點都會有單一 I/O 執行緒和單一延遲寫入器執行緒。視資料庫使用情形而定，這些單一執行緒可能是重大的效能瓶頸。設定四個軟體 NUMA 節點可提供四個 I/O 執行緒和四個延遲寫入器執行緒來增加效能。

---

##歷史：
在二十世紀年代時發明，主要開發商有Convex、IBM（前公司）、EMC、Compaq。當時主要是為類UNIX而開發，在後期才開始在Windwos NT上運用。
而首次使用該技術的是在UNIX系統上的對稱多處理器XPS-100，由VAST設計，也因此成為歐洲頂級的UNIX廠商。

---

##參考資料：
國家教育研究所 http://terms.naer.edu.tw/detail/1283250/
WIKIPEDIA https://en.wikipedia.org/wiki/Non-uniform_memory_access
百度百科 http://baike.baidu.com/view/380118.htm
TechNet https://technet.microsoft.com/zh-tw/
國立台灣大學計算機及資訊網絡中心電子報 http://www.cc.ntu.edu.tw/chinese/epaper/0015/
